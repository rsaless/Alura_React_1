(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){e.exports=a(51)},47:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(25),o=a.n(l),s=a(4),c=a(5),i=a(7),u=a(6),m=a(8),p=a(10),h=(a(47),a(48),function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"layout"},r.a.createElement("a",{href:"#menu",id:"menuLink",className:"menu-link"},r.a.createElement("span",null)),r.a.createElement("div",{id:"menu"},r.a.createElement("div",{className:"pure-menu"},r.a.createElement("a",{className:"pure-menu-heading",href:"#"},"Company"),r.a.createElement("ul",{className:"pure-menu-list"},r.a.createElement("li",{className:"pure-menu-item"},r.a.createElement(p.b,{to:"/",className:"pure-menu-link"},"Home")),r.a.createElement("li",{className:"pure-menu-item"},r.a.createElement(p.b,{to:"/autor",className:"pure-menu-link"},"Autor")),r.a.createElement("li",{className:"pure-menu-item"},r.a.createElement(p.b,{to:"/livro",className:"pure-menu-link"},"Livro"))))),r.a.createElement("div",{id:"main"},this.props.children))}}]),t}(n.Component)),d=a(30),b=a(13),E=a.n(b),v=a(9),f=a.n(v),j=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={msgErro:""},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:this.props.id},this.props.label),r.a.createElement("input",this.props),r.a.createElement("span",{className:"error"},this.state.msgErro))}},{key:"componentDidMount",value:function(){var e=this;f.a.subscribe("erro-validacao",function(t,a){a.field===e.props.name&&e.setState({msgErro:a.defaultMessage})}),f.a.subscribe("limpa-erros",function(t){e.setState({msgErro:""})})}}]),t}(n.Component),O=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",null),r.a.createElement("input",{type:"submit",className:"pure-button pure-button-primary",value:this.props.label}))}}]),t}(r.a.Component),y=function e(){Object(s.a)(this,e),this.publicaErros=function(e){for(var t=0;t<e.errors.length;t++){var a=e.errors[t];f.a.publish("erro-validacao",a)}}},N=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).enviaForm=function(t){t.preventDefault(),E.a.ajax({url:"http://localhost:8080/api/autores",contentType:"application/json",dataType:"json",type:"post",data:JSON.stringify({nome:e.state.nome,email:e.state.email,senha:e.state.senha}),success:function(t){console.log("enviado com sucesso"),f.a.publish("atualiza-lista-autores",t),e.setState({nome:"",email:"",senha:""})},error:function(e){400===e.status&&(new y).publicaErros(e.responseJSON)},beforeSend:function(){f.a.publish("limpa-erros",{})}})},e.salvaAlteracao=function(t,a){return e.setState(Object(d.a)({},t,a.target.value))},e.state={nome:"",email:"",senha:""},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"pure-form pure-form-aligned"},r.a.createElement("form",{className:"pure-form pure-form-aligned",onSubmit:this.enviaForm,method:"POST"},r.a.createElement(j,{id:"nome",type:"text",name:"nome",label:"Nome",value:this.state.nome,onChange:this.salvaAlteracao.bind(this,"nome")}),r.a.createElement(j,{id:"email",type:"email",name:"email",label:"Email",value:this.state.email,onChange:this.salvaAlteracao.bind(this,"email")}),r.a.createElement(j,{id:"senha",type:"password",name:"senha",label:"Senha",value:this.state.senha,onChange:this.salvaAlteracao.bind(this,"senha")}),r.a.createElement(O,{label:"Gravar"})))}}]),t}(n.Component),g=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("table",{className:"pure-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Nome"),r.a.createElement("th",null,"email"))),r.a.createElement("tbody",null,this.props.lista.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.nome),r.a.createElement("td",null,e.email))}))))}}]),t}(n.Component),S=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={lista:[]},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.a.ajax({url:"http://localhost:8080/api/autores",dataType:"json",success:function(t){return e.setState({lista:t})}}),f.a.subscribe("atualiza-lista-autores",function(t,a){e.setState({lista:a})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"Cadastro de autores")),r.a.createElement("div",{className:"content",id:"content"},r.a.createElement(N,null),r.a.createElement(g,{lista:this.state.lista})))}}]),t}(n.Component),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).enviaForm=function(e){e.preventDefault();var t=a.state.titulo.trim(),n=a.state.preco.trim(),r=a.state.autorId;E.a.ajax({url:"http://localhost:8080/api/livros",contentType:"application/json",dataType:"json",type:"post",data:JSON.stringify({titulo:t,preco:n,autorId:r}),success:function(e){console.log("enviado com sucesso"),f.a.publish("atualiza-lista-livros",e),a.setState({titulo:"",preco:"",autorId:""})},error:function(e){400===e.status&&(new y).publicaErros(e.responseJSON)},beforeSend:function(){f.a.publish("limpa-erros",{})}}),a.setState({titulo:"",preco:"",autorId:""})},a.setTitulo=function(e){return a.setState({titulo:e.target.value})},a.setPreco=function(e){return a.setState({preco:e.target.value})},a.setAutorId=function(e){return a.setState({autorId:e.target.value})},a.state={titulo:"",preco:"",autorId:""},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.a.ajax({url:"http://localhost:8080/api/autores",dataType:"json",sucess:function(t){e.setState={autores:t}}})}},{key:"render",value:function(){var e=this.props.autores.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.nome)});return r.a.createElement("div",{className:"pure-form pure-form-aligned"},r.a.createElement("form",{className:"pure-form pure-form-aligned",onSubmit:this.enviaForm,method:"POST"},r.a.createElement(j,{id:"titulo",type:"text",name:"titulo",label:"titulo",value:this.state.titulo,onChange:this.setTitulo}),r.a.createElement(j,{id:"preco",type:"number",name:"preco",label:"Pre\xe7o",value:this.state.preco,onChange:this.setPreco}),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"autorId"},"Autor"),r.a.createElement("select",{value:this.state.autorId,name:"autorId",id:"autorId",onChange:this.setAutorId},r.a.createElement("option",{value:""},"Selecione"),e),r.a.createElement("span",{className:"error"},this.state.msgErro)),r.a.createElement(O,{label:"Gravar"})))}}]),t}(n.Component),C=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("table",{className:"pure-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"T\xedtulo"),r.a.createElement("th",null,"Pre\xe7o"),r.a.createElement("th",null,"Autor"))),r.a.createElement("tbody",null,this.props.lista.map(function(e){return r.a.createElement("tr",{key:e.titulo},r.a.createElement("td",null,e.titulo),r.a.createElement("td",null,e.preco),r.a.createElement("td",null,e.autor.nome))}))))}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={lista:[],autores:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.a.ajax({url:"http://localhost:8080/api/livros",dataType:"json",success:function(t){return e.setState({lista:t})}}),E.a.ajax({url:"http://localhost:8080/api/autores",dataType:"json",success:function(t){return e.setState({autores:t})}}),f.a.subscribe("atualiza-lista-livros",function(t,a){e.setState({lista:a})})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"Cadastro de livros")),r.a.createElement("div",{className:"content",id:"content"},r.a.createElement(k,{autores:this.state.autores}),r.a.createElement(C,{lista:this.state.lista})))}}]),t}(n.Component),T=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"Bem vindo ao sistema")),r.a.createElement("div",{className:"content",id:"content"}))}}]),t}(n.Component);a(50);o.a.render(r.a.createElement(p.d,{history:p.e},r.a.createElement(p.c,{path:"/",component:h},r.a.createElement(p.a,{component:T}),r.a.createElement(p.c,{path:"/autor",component:S}),r.a.createElement(p.c,{path:"/livro",component:I}))),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.a1f665e7.chunk.js.map